import*as t from"https://cdn.skypack.dev/pixi.js@5.x";import{KawaseBlurFilter as s}from"https://cdn.skypack.dev/@pixi/filter-kawase-blur@3.2.0";import e from"https://cdn.skypack.dev/simplex-noise@3.0.0";import r from"https://cdn.skypack.dev/hsl-to-hex";import h from"https://cdn.skypack.dev/debounce";function random(t,s){return Math.random()*(s-t)+t}function map(t,s,e,r,h){return(t-s)/(e-s)*(h-r)+r}let simplex=new e;class ColorPalette{constructor(){this.setColors(),this.setCustomProperties()}setColors(){this.hue=~~random(220,360),this.complimentaryHue1=this.hue+30,this.complimentaryHue2=this.hue+60,this.saturation=95,this.lightness=50,this.baseColor=r(this.hue,this.saturation,this.lightness),this.complimentaryColor1=r(this.complimentaryHue1,this.saturation,this.lightness),this.complimentaryColor2=r(this.complimentaryHue2,this.saturation,this.lightness),this.colorChoices=[this.baseColor,this.complimentaryColor1,this.complimentaryColor2,]}randomColor(){return this.colorChoices[~~random(0,this.colorChoices.length)].replace("#","0x")}setCustomProperties(){document.documentElement.style.setProperty("--hue",this.hue),document.documentElement.style.setProperty("--hue-complimentary1",this.complimentaryHue1),document.documentElement.style.setProperty("--hue-complimentary2",this.complimentaryHue2)}}class Orb{constructor(s=0){this.bounds=this.setBounds(),this.x=random(this.bounds.x.min,this.bounds.x.max),this.y=random(this.bounds.y.min,this.bounds.y.max),this.scale=1,this.fill=s,this.radius=random(window.innerHeight/6,window.innerHeight/3),this.xOff=random(0,1e3),this.yOff=random(0,1e3),this.inc=.002,this.graphics=new t.Graphics,this.graphics.alpha=.825,window.addEventListener("resize",h(()=>{this.bounds=this.setBounds()},250))}setBounds(){let t=window.innerWidth<1e3?window.innerWidth/3:window.innerWidth/5,s=window.innerWidth/1.25,e=window.innerWidth<1e3?window.innerHeight:window.innerHeight/1.375;return{x:{min:s-t,max:s+t},y:{min:e-t,max:e+t}}}update(){let t=simplex.noise2D(this.xOff,this.xOff),s=simplex.noise2D(this.yOff,this.yOff),e=simplex.noise2D(this.xOff,this.yOff);this.x=map(t,-1,1,this.bounds.x.min,this.bounds.x.max),this.y=map(s,-1,1,this.bounds.y.min,this.bounds.y.max),this.scale=map(e,-1,1,.5,1),this.xOff+=this.inc,this.yOff+=this.inc}render(){this.graphics.x=this.x,this.graphics.y=this.y,this.graphics.scale.set(this.scale),this.graphics.clear(),this.graphics.beginFill(this.fill),this.graphics.drawCircle(0,0,this.radius),this.graphics.endFill()}}let app=new t.Application({view:document.querySelector(".orb-canvas"),resizeTo:window,transparent:!0});app.stage.filters=[new s(30,10,!0)];let colorPalette=new ColorPalette,orbs=[];for(let i=0;i<10;i++){let o=new Orb(colorPalette.randomColor());app.stage.addChild(o.graphics),orbs.push(o)}window.matchMedia("(prefers-reduced-motion: reduce)").matches?orbs.forEach(t=>{t.update(),t.render()}):app.ticker.add(()=>{orbs.forEach(t=>{t.update(),t.render()})});